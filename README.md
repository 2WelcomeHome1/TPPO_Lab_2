# TPPO_Lab_2

Сервер запускается с помощью программного комплекса Microsoft Visual Studio Code на python 3.9.7. Клиент запускается через консольное приложение командой "./tppo_client_3421.py". 

Программа поддерживает три типа управления:
1. Ручное. В данном случае физическое изменение параметров файла представляет собой иммитацию использования ПУ.
2. С помощью Socket server. Клиент, подключенный к серверу, может выполнять следующие запросы:

 - Команда /get fan info - Получить значения скорости и угла вращения
 - Команда /set speed [value] - Задать скорость вращения вентилятора (0-10 rpm)
 - Команда /set angle [value] - Задать угол вращения вентилятора (0-180 deg)
 - Команда /stop - Выключить вентилятор 
 - Команда /help - Получить список всех команд 
 - Команда /exit - отключиться от сервера

Помимо данных запросов, существуют скрытые, доступные только для администратора сети. Для этого выполняется запрос "/admin 1111", где 1111 - это пароль. После чего клиент получает доступ к следующим командам: 
- Команда /log off - Выключить сбор логов 
- Команда /log on - Включить сбор логов 
- Команда /get log - Получить информацию из файла логов

3. С помощью Flask Webserver. Клиент, подключается к сайту и может выполнять следующие команды, используя соответствующие клавиши в веб интерфейсе:
- Изменить Скорость вращения и угол поворота вентилятора
- Получить параметры скорости и угла в реальном времени
- Отключить вентилятор
- Получить помощь

![[alt text](example.com/logo.png)](https://github.com/2WelcomeHome1/TPPO_Lab_2/blob/main/image.png?raw=true)


Помимо использования кнопок в веб интерфейсе, управление вентилятором возможно с помощью клиентского приложения, поддерживающего передачу HTTP-запросов (curl). Пример запросов представлен ниже:

- curl -d "angle=110" -X POST http://ip:port/set_angle
- curl -d "speed=10" -X POST http://ip:port/set_speed
- curl http://ip:port/get_fan_info
- curl -X POST  http://ip:port/stop  


Сборка файла логов включена автоматически. Создание исполнительного файла так же происходит автоматически
С помощью функции check_file производится отправка уведомлений об изменении параметров вентилятора пользователю, применяющему в качестве средства управления Socket server.


Для успешной работы проекта необходимы следующие библиотеки:

- import socket, re, os, time, logging
- import pandas as pd
- from watchdog.observers import Observer
- from watchdog.events import FileSystemEventHandler
- import threading as thread
- from threading import Thread 
